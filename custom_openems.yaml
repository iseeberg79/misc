  type: custom
  power:
    source: http
    uri: http://openems:8084/rest/channel/_sum/EssDischargePower
    auth:
      type: basic
      user: x
      password: user
    jq: (.value // 0)
  soc:
    source: http
    uri: http://openems:8084/rest/channel/_sum/EssSoc
    auth:
      type: basic
      user: x
      password: user
    jq: (.value // 0)
  batterymode:
    source: watchdog
    timeout: 60 # re-write at timeout/2
    reset: 1
    set:
      source: switch
      switch:
      - case: 1 # normal
        set:
          source: http
          uri: http://openems:8084/rest/channel/ess0/SetActivePowerEquals
          auth:
            type: basic
            user: x
            password: admin
          method: POST
          headers:
          - content-type: application/json
          body: '{"value":0}'		  
      - case: 2 # hold
        set:
          source: http
          uri: http://openems:8084/rest/channel/ess0/SetActivePowerEquals
          auth:
            type: basic
            user: x
            password: admin
          method: POST
          headers:
          - content-type: application/json
          body: '{"value":0}'
      - case: 3 # charge (not implemented)
        set:
          source: error
          error: ErrNotAvailable
  capacity: 10.56 # kWh
